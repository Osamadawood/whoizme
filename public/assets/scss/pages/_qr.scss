@mixin apply() {
    /* KPI style tweaks for QR page */
    .kpi__value--xl {
        font-size: clamp(2.4rem, 4.6vw, 3.6rem);
        font-weight: 800;
        letter-spacing: -.02em;
    }
    .delta {
        display: inline-flex;
        align-items: center;
        gap: .4rem;
        padding: .2rem .6rem;
        border-radius: var(--radius-default);
        font-size: .95rem;
    }
    .delta--up {
        background: rgba(34, 197, 94, .14);
        color: #22c55e;
    }
    .delta--down {
        background: rgba(239, 68, 68, .14);
        color: #ef4444;
    }
    .kpi__label {
        display: flex;
        align-items: center;
        gap: .6rem;
        color: var(--text-muted);
    }
    /* Header (search + segmented view) */
    .qr-header .header-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        border: 1px solid var(--border);
        border-radius: 20px;
        background: var(--surface);
        padding: 12px 14px;
    }
    .qr-header .search-pill {
        display: flex;
        align-items: center;
        gap: 10px;
        border: 1px solid var(--border);
        border-radius: var(--radius-default);
        padding: 10px 14px;
        min-width: 320px;
        background: color-mix(in oklab, var(--surface), white 3%);
    }
    .qr-header .search-pill input {
        border: none;
        background: transparent;
        outline: none;
        color: var(--text);
        width: 240px;
    }
    .qr-header .seg-switch {
        display: inline-flex;
        align-items: center;
        border: 1px solid var(--border);
        border-radius: var(--radius-default);
        padding: 4px;
        background: color-mix(in oklab, var(--surface), white 3%);
    }
    .qr-header .seg-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        border-radius: var(--radius-default);
        padding: 10px 14px;
        color: var(--text);
        text-decoration: none;
    }
    .qr-header .seg-btn.is-active {
        background: var(--primary);
        color: var(--surface);
    }
    .qr-header .seg-count {
        opacity: .7;
    }
    /* QR cards */
    .qr-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }
    .qr-card {
        border: 1px solid var(--border);
        border-radius: var(--radius-default);
        background: var(--surface);
        transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    }
    .qr-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        border-color: color-mix(in srgb, var(--primary) 30%, var(--border));
    }
    .qr-card__body {
        padding: 16px;
    }
    .qr-card__media {
        position: relative;
        border-radius: var(--radius-default);
        overflow: hidden;
        border: 1px solid var(--border);
        background: linear-gradient(180deg, #0b1220, #131a2a);
    }
    .qr-card__media::before {
        content: "";
        display: block;
        aspect-ratio: 1/1;
    }
    .qr-card__img {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: contain;
    }
    .qr-card__title {
        font-weight: 600;
        margin: .75rem 0 .35rem;
        color: var(--text);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .qr-card__meta {
        color: var(--text-muted);
        font-size: .9rem;
    }
    .qr-card__actions {
        display: flex;
        gap: 8px;
        margin-top: .9rem;
    }
    /* Table View - Match dashboard table exactly */
    .qr-table .table-wrapper {
        border: 1px solid var(--border);
        border-radius: var(--radius-default);
        overflow: hidden;
        background: var(--surface);
    }
    .qr-table .table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 8px;
    }
    .qr-table .table th {
        font-size: .8rem;
        color: var(--muted);
        text-align: left;
        padding: 10px 12px;
    }
    .qr-table .table td {
        padding: 12px;
        border-top: 1px solid color-mix(in oklab, var(--text) 12%, transparent);
        border-bottom: 1px solid color-mix(in oklab, var(--text) 12%, transparent);
        background: var(--surface);
        color: var(--text);
        &:first-child {
            border-radius: var(--radius-default) 0 0 var(--radius-default);
        }
        &:last-child {
            border-radius: 0 var(--radius-default) var(--radius-default) 0;
        }
    }
    .qr-preview {
        display: flex;
        align-items: center;
    }
    /* Type chip styling (matching dashboard) */
    .type-chip {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        border-radius: var(--radius-default);
        border: 1px solid var(--border);
        background: rgba(75, 107, 251, .08);
        color: var(--primary);
        margin-right: 8px;
    }
    .type-chip i {
        font-size: 14px;
        line-height: 1;
    }
    /* Badge styling (matching dashboard) */
    .badge {
        display: inline-flex;
        align-items: center;
        padding: .2rem .6rem;
        border-radius: var(--radius-default);
        font-size: .75rem;
        font-weight: 600;
        background: color-mix(in oklab, var(--text) 8%, transparent);
        color: var(--text);
    }
    .qr-title {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }
    .qr-url {
        font-size: .85rem;
        color: var(--text-muted);
        font-family: monospace;
    }
    .table-actions {
        display: flex;
        gap: 8px;
    }
    /* Pagination */
    .pagination-wrapper {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
    }
    .pagination {
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .pagination__link {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 40px;
        height: 40px;
        padding: 0 12px;
        border: 1px solid var(--border);
        border-radius: var(--radius-default);
        color: var(--text);
        text-decoration: none;
        transition: all .15s ease;
    }
    .pagination__link:hover {
        background: color-mix(in oklab, var(--surface), white 2%);
        border-color: var(--primary);
    }
    .pagination__link.is-active {
        background: var(--primary);
        color: var(--surface);
        border-color: var(--primary);
    }
    .pagination-info {
        color: var(--text-muted);
        font-size: .9rem;
    }
    /* ===== QR Creation Form Styles ===== */
    /* QR Type Tabs */
    .qr-tabs {
        display: flex;
        gap: 4px;
        padding: 4px;
        background: var(--surface-700);
        border: 1px solid var(--border);
        border-radius: var(--radius-default);
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
        &::-webkit-scrollbar {
            display: none;
        }
    }
    .qr-tab {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 8px 12px;
        border: none;
        background: transparent;
        color: var(--text-muted);
        border-radius: var(--radius-default);
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 14px;
        font-weight: 500;
        white-space: nowrap;
        flex-shrink: 0;
        &:hover {
            background: var(--surface-600);
            color: var(--text);
        }
        &.is-active {
            background: var(--brand);
            color: var(--brand-contrast);
            font-weight: 600;
        }
        i {
            font-size: 16px;
        }
    }
    /* QR Form Panes */
    .qr-pane {
        border: 1px solid var(--border);
        border-radius: var(--radius-default);
        padding: 16px;
        background: var(--surface-700);
        margin-bottom: 16px;
        &.is-hidden {
            display: none;
        }
    }
    /* Live Preview Card */
    .qr-card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 16px;
        box-shadow: var(--shadow-md);
        min-height: 400px;
        display: flex;
        flex-direction: column;
        &__body {
            padding: 24px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
    }
    /* QR Canvas Wrapper */
    .qr-canvas-wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        flex: 1;
        min-height: 320px;
        margin: 16px 0;
    }
    #qr-canvas {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 256px;
        height: 256px;
        background: var(--surface);
        border-radius: var(--radius-default);
        border: 1px solid var(--border);
        img {
            max-width: 100%;
            max-height: 100%;
            border-radius: var(--radius-default);
        }
    }
    /* QR Caption */
    .qr-caption {
        text-align: center;
        color: var(--text-muted);
        font-size: 14px;
        font-weight: 500;
        margin-top: 16px;
        padding: 8px 16px;
        background: var(--surface-700);
        border-radius: var(--radius-default);
        border: 1px solid var(--border);
    }
    /* Styling Controls */
    .qr-controls {
        margin-top: 24px;
        padding-top: 24px;
        border-top: 1px solid var(--border);
        .h5 {
            margin: 0 0 16px 0;
            color: var(--text);
            font-size: 16px;
            font-weight: 600;
        }
    }
    .qr-controls__grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        align-items: end;
    }
    .qr-control {
        display: flex;
        flex-direction: column;
        gap: 8px;
        &--full {
            grid-column: 1 / -1;
        }
        .label {
            font-size: 14px;
            font-weight: 500;
            color: var(--text);
            margin: 0;
        }
    }
    /* Custom Input Styles */
    .input--color {
        width: 100%;
        height: 40px;
        padding: 4px;
        border: 1px solid var(--border);
        border-radius: var(--radius-default);
        background: var(--surface);
        cursor: pointer;
        &::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        &::-webkit-color-swatch {
            border: none;
            border-radius: var(--radius-default);
        }
    }
    .input--range {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: var(--surface-600);
        outline: none;
        cursor: pointer;
        &::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--brand);
            cursor: pointer;
            border: 2px solid var(--surface);
            box-shadow: var(--shadow-sm);
        }
        &::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--brand);
            cursor: pointer;
            border: 2px solid var(--surface);
            box-shadow: var(--shadow-sm);
        }
    }
    /* Helper Info */
    .qr-helper {
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid var(--border);
    }
    .note {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        color: var(--text-muted);
        i {
            font-size: 16px;
            color: var(--text-muted);
        }
    }
    /* Character Counter */
    .char-counter {
        margin-top: 4px;
        font-size: 12px;
        color: var(--text-muted);
        text-align: right;
    }
    /* Required Indicator */
    .required {
        color: var(--danger);
    }
    /* Mobile Responsive */
    @media (max-width: 768px) {
        .qr-tabs {
            flex-wrap: wrap;
        }
        .qr-tab {
            flex: 1;
            min-width: 120px;
        }
        .qr-card {
            min-height: 360px;
        }
        #qr-canvas {
            width: 200px;
            height: 200px;
        }
        .qr-controls__grid {
            grid-template-columns: 1fr;
            gap: 12px;
        }
    }
}


/* List view refined layout */

.qr-list {
    .qr-row {
        display: grid;
        grid-template-columns: auto 1fr auto;
        gap: 16px;
        align-items: center;
        padding-block: 16px;
    }
    .qr-cell--thumb {
        width: 100px;
    }
    .qr-thumb-container {
        width: 80px;
        height: 80px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: var(--surface);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px;
    }
    .qr-thumb {
        width: 64px;
        height: 64px;
    }
    .qr-title__link {
        text-decoration: none;
        color: var(--text);
    }
    .qr-title__text {
        font-size: 1.8rem;
        font-weight: 600;
        margin: 0 0 6px;
    }
    .qr-title__meta {
        display: inline-flex;
        gap: 8px;
        margin-bottom: 6px;
    }
    .qr-destination__text {
        color: var(--text-muted);
        font-size: 1.4rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 52vw;
    }
    .qr-meta__row {
        margin-top: 6px;
        color: var(--text-muted);
        font-size: 1.3rem;
        display: flex;
        gap: 8px;
        align-items: center;
    }
    .qr-actions {
        display: inline-flex;
        gap: 8px;
        align-items: center;
    }
    .qr-actions__link {
        color: var(--brand);
        text-decoration: none;
        font-weight: 600;
    }
    .qr-actions__kebab {
        position: relative;
    }
    .kebab-menu {
        position: absolute;
        top: calc(100% + 8px);
        right: 0;
        background: var(--surface-elevated);
        border: 1px solid var(--border);
        border-radius: 12px;
        box-shadow: var(--shadow-md);
        min-width: 200px;
        padding: 8px;
        display: none;
    }
    .kebab-menu.is-open {
        display: block;
    }
    .kebab-menu__item {
        display: flex;
        gap: 10px;
        align-items: center;
        width: 100%;
        padding: 10px 12px;
        border-radius: 10px;
        text-align: left;
        background: none;
        border: 0;
        color: var(--text);
        text-decoration: none;
    }
    .kebab-menu__item:hover {
        background: var(--surface-hover);
    }
}

.qr-header {
    display: grid;
    grid-template-rows: auto auto;
    row-gap: 1.6rem;
}

.qr-header__top {
    display: grid;
    grid-template-columns: 1fr auto auto auto;
    column-gap: 1.2rem;
    align-items: center;
}

html[dir="rtl"] .qr-header__top {
    grid-template-columns: auto auto auto 1fr;
}

.qr-header__title {
    font-size: 2.4rem;
    font-weight: 800;
    margin: 0;
    letter-spacing: -.02em;
}

.qr-list__tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 1.2rem;
    margin: .8rem 0 1.6rem;
}

.tabs__item {
    height: 3.2rem;
    padding: 0 1.2rem;
    border-radius: 12px;
    background: transparent;
    color: var(--text);
    border: 1px solid var(--border);
    cursor: pointer;
    transition: background-color .15s ease, color .15s ease, border-color .15s ease;
}

.tabs__item[aria-selected="true"] {
    background: var(--primary);
    color: var(--surface);
    border-color: var(--primary);
}

.tabs__item:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}


/* QR list card header + tabs (inside the list box) */

.qr-list {
    &.card {
        background: var(--surface);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-md);
        padding: 1.6rem 2.0rem;
    }
    &__header {
        margin-bottom: 1.6rem;
    }
    &__title {
        margin: 0 0 .8rem 0;
        color: var(--text-strong);
        font-weight: 800;
        letter-spacing: -.02em;
        font-size: clamp(1.6rem, 2.2vw, 2.2rem);
    }
    &__tabs {
        display: flex;
        flex-wrap: wrap;
        gap: 1.2rem;
    }
    &__tabs .tabs__item,
    &__tabs a[role="tab"],
    &__tabs button[role="tab"] {
        padding: .6rem 1.0rem;
        border-radius: var(--radius-lg);
        line-height: 1;
        color: var(--text-muted);
        background: transparent;
        border: 1px solid transparent;
        cursor: pointer;
    }
    &__tabs .is-active,
    &__tabs [aria-selected="true"] {
        color: var(--primary);
        border-color: color-mix(in oklab, var(--primary) 25%, transparent);
        background: color-mix(in oklab, var(--primary) 6%, transparent);
        font-weight: 600;
    }
    /* Empty state inside list body */
    .qr-empty {
        border: 1px dashed var(--border);
        border-radius: var(--radius-lg);
        text-align: center;
        color: var(--text-muted);
        margin-bottom: 1.2rem;
    }
}

[dir="rtl"] .qr-list__title {
    text-align: start;
}

.qr-header__tabs {
    border: 1px solid var(--border);
    background: var(--surface);
    padding: .8rem;
    border-radius: 12px;
    display: inline-flex;
    gap: .4rem;
}

.qr-tab {
    appearance: none;
    border: 0;
    padding: .8rem 1.6rem;
    border-radius: 10px;
    font-weight: 600;
    color: var(--text);
    background: transparent;
    cursor: pointer;
}

.qr-tab:is(:hover, :focus-visible) {
    background: color-mix(in oklab, var(--brand) 12%, transparent);
}

.qr-tab.is-active {
    background: var(--primary);
    color: var(--surface);
}


/* QR details view */

.qr-view {
    .qr-view__grid {
        display: grid;
        grid-template-columns: 1fr 520px;
        gap: 16px;
        align-items: start;
    }
    .qr-view__payload {
        max-width: 680px;
        word-break: break-word;
        color: var(--text-muted);
    }
    .qr-view__qr {
        background: var(--surface);
        padding: 8px;
        border-radius: 12px;
        width: 512px;
        height: 512px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .qr-view__actions {
        margin-top: 8px;
        text-align: right;
    }
}

.new__qr {
    align-items: baseline !important;
}


/* QR Alerts */

.qr-alert {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 12px 16px;
    border-radius: var(--radius-default);
    margin-bottom: 16px;
    font-size: 0.9rem;
    animation: slideInDown 0.3s ease-out;
}

.qr-alert--success {
    background: color-mix(in oklab, var(--surface), #22c55e 8%);
    border: 1px solid color-mix(in oklab, var(--border), #22c55e 20%);
    color: #22c55e;
}

.qr-alert--error {
    background: color-mix(in oklab, var(--surface), #ef4444 8%);
    border: 1px solid color-mix(in oklab, var(--border), #ef4444 20%);
    color: #ef4444;
}

.qr-alert__content {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
}

.qr-alert__close {
    background: none;
    border: none;
    color: inherit;
    cursor: pointer;
    padding: 4px;
    border-radius: var(--radius-default);
    opacity: 0.7;
    transition: opacity 0.2s ease;
}

.qr-alert__close:hover {
    opacity: 1;
    background: color-mix(in oklab, transparent, currentColor 10%);
}


/* Button loading state */

.btn--loading {
    position: relative;
    color: transparent !important;
}

.btn--loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 16px;
    height: 16px;
    margin: -8px 0 0 -8px;
    border: 2px solid transparent;
    border-top: 2px solid currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes slideInDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}